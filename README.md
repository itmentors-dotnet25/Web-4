# üìö –ë–ª–æ–∫ 4. –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ .NET - REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –∫–Ω–∏–≥

## üéØ –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –∫–Ω–∏–≥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ASP.NET Core –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

**–°—Ç–µ–∫:** ASP.NET Core, Swagger, FluentValidation, xUnit

---

## üìã –ó–∞–¥–∞—á–∏

### –ó–∞–¥–∞—á–∞ 1: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Swagger/OpenAPI
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `ILogger` –≤–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã API
- –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `Book` —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:
    - `Id` (int, –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á)
    - `Title` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
    - `Author` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
    - `ISBN` (string, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
    - `PublicationYear` (int, –¥–∏–∞–ø–∞–∑–æ–Ω 1000-—Ç–µ–∫—É—â–∏–π –≥–æ–¥)
    - `Genre` (string)
    - `IsAvailable` (bool)

### –ó–∞–¥–∞—á–∞ 2: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ API –∏ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ endpoints —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤:

```
GET    /api/books          - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
GET    /api/books/{id}     - –ø–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ID
POST   /api/books          - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É
PUT    /api/books/{id}     - –æ–±–Ω–æ–≤–∏—Ç—å –∫–Ω–∏–≥—É
DELETE /api/books/{id}     - —É–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- *–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Entity Framework Core —Å in-memory database
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (404 –¥–ª—è –Ω–µ–Ω–∞–π–¥–µ–Ω–Ω–æ–π –∫–Ω–∏–≥–∏)

### –ó–∞–¥–∞—á–∞ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π

- –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é **DataAnnotations** –≤ –º–æ–¥–µ–ª—å `Book`
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è `ISBN` (—Ñ–æ—Ä–º–∞—Ç: XXX-XX-XXXX-XXX-X)
- –°–æ–∑–¥–∞—Ç—å **FluentValidation** –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è –º–æ–¥–µ–ª–∏ `Book`

### –ó–∞–¥–∞—á–∞ 4: –ü–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

–†–∞—Å—à–∏—Ä–∏—Ç—å endpoint `GET /api/books`:

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `pageNumber` (default: 1)
- `pageSize` (default: 10, max: 50)
- `author` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ—Ä—É (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
- `sortBy` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `title`

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/books?pageNumber=1&pageSize=5&author=Tolkien&sortBy=title
```

### –ó–∞–¥–∞—á–∞ 5: Middleware –∏ —Ñ–∏–ª—å—Ç—Ä—ã

- –°–æ–∑–¥–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö routes (–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON)

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö routes:**
```json
{
  "success": false,
  "message": "Route not found",
  "path": "/api/nonexistent",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### –ó–∞–¥–∞—á–∞ 6: –§–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –≤—Å–µ—Ö endpoints:
```json
{
  "success": true,
  "data": { ... },
  "message": "Operation completed successfully",
  "pagination": {
    "pageNumber": 1,
    "pageSize": 10,
    "totalCount": 100,
    "totalPages": 10
  }
}
```

### –ó–∞–¥–∞—á–∞ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ù–∞–ø–∏—Å–∞—Ç—å **unit-—Ç–µ—Å—Ç—ã** –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–∞–ø–∏—Å–∞—Ç—å **–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤/minimal APIs

---

## üìù –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```csharp
// –°—Ç–∞—Ä—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –∫–Ω–∏–≥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
private static List<Book> _books = new()
{
    new Book { Id = 1, Title = "The Lord of the Rings", Author = "J.R.R. Tolkien", ISBN = "978-0544003415", PublicationYear = 1954, Genre = "Fantasy", IsAvailable = true },
    new Book { Id = 2, Title = "1984", Author = "George Orwell", ISBN = "978-0451524935", PublicationYear = 1949, Genre = "Dystopian", IsAvailable = true },
    new Book { Id = 3, Title = "Pride and Prejudice", Author = "Jane Austen", ISBN = "978-0141439518", PublicationYear = 1813, Genre = "Romance", IsAvailable = false }
};
```

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [ASP.NET Core Documentation](https://docs.microsoft.com/aspnet/core)
- [FluentValidation Documentation](https://docs.fluentvalidation.net/)
- [Swagger/OpenAPI](https://swagger.io/)
- [xUnit Testing](https://xunit.net/)

**–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ**
